<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <style>
        /* Forces colors to appear in PDF */
        * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }

        @page {
            margin: 15mm 0; /* Adds 15mm to the top and bottom of EVERY page */
        }
        
        body { 
            -webkit-print-color-adjust: exact !important; 
            print-color-adjust: exact !important; 
            margin: 0; 
            padding: 0;
        }
        
        .modern { font-family: 'Inter', sans-serif; }
        .corporate { font-family: 'Playfair Display', serif; }
        
        /* A4 Sizing */
        .resume-page {
            width: 210mm;
            background: white;
            margin: 0 auto;
            padding-left: 12mm;
            padding-right: 12mm;
        }

        /* Prevents splitting experience items across pages */
        .break-inside-avoid { 
            page-break-inside: avoid; 
            margin-bottom: 1rem;
        }
        
        /* Tailwind doesn't always handle spacing perfectly in PDF; manual override if needed */
        .sidebar-bg { background-color: #f8fafc !important; }
    </style>
</head>
<body>
    <div class="resume-page <%= template === 'modern' ? 'modern p-12' : 'corporate p-16' %>">
        
        <header class="mb-10 <%= template === 'modern' ? 'border-b-8 border-emerald-500 pb-8' : 'text-center border-b-2 border-slate-900 pb-10' %>">
            <h1 class="text-5xl font-black uppercase tracking-tighter mb-2 text-slate-900">
                <%= user.fullName %> 
            </h1>
           <div class="flex items-center <%= template === 'modern' ? 'justify-start' : 'justify-center' %> gap-4 mt-3 text-[11px] text-slate-500 font-medium">
        
                <div class="flex items-center gap-1.5">
                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-400">
                        <rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
                    </svg>
                    <span><%= user.email %></span>
                </div>

                <span class="text-slate-300">|</span>

                <div class="flex items-center gap-1.5">
                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-400">
                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                    </svg>
                    <span><%= user.phoneNumber %></span>
                </div>

                <% if (user.linkedinUrl) { %>
                    <span class="text-slate-300">|</span>
                    <div class="flex items-center gap-1.5">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-400">
                            <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect width="4" height="12" x="2" y="9"/><circle cx="4" cy="4" r="2"/>
                        </svg>
                        <span><%= user.linkedinUrl.replace(/^https?:\/\/(www\.)?/, '') %></span>
                    </div>
                <% } %>
            </div>
        </header>

        <div class="flex gap-12">
            <div class="w-2/3 space-y-10">
                <section>
                    <h2 class="text-xs font-black uppercase tracking-[0.3em] text-emerald-600 mb-4">Professional Profile</h2>
                    <p class="leading-relaxed text-[14px] text-slate-700">
                        <%= ai.professionalSummary %> </p>
                </section>

                <section>
                    <h2 class="text-xs font-black uppercase tracking-[0.3em] text-emerald-600 mb-6">Experience</h2>
                    <% ai.refinedExperience.forEach(function(exp) { %>
                        <div class="mb-8 break-inside-avoid">
                            <div class="flex justify-between items-baseline mb-1">
                                <h3 class="font-bold text-lg text-slate-900"><%= exp.role %></h3> <div class="text-[10px] font-bold text-slate-400 uppercase">
                                    <%= exp.startDate %> — <%= exp.endDate %> </div>
                            </div>
                            <div class="text-sm font-bold text-emerald-600 uppercase mb-3"><%= exp.company %></div> <ul class="space-y-2">
                                <% exp.highlights.forEach(function(bullet) { %>
                                    <li class="text-[13px] text-slate-600 flex gap-2">
                                        <span class="text-emerald-500 font-bold">•</span>
                                        <span><%= bullet %></span> </li>
                                <% }); %>
                            </ul>
                        </div>
                    <% }); %>
                </section>
            </div>

            <div class="w-1/3 space-y-10">
                <section class="<%= template === 'modern' ? 'sidebar-bg p-6 rounded-2xl border border-slate-100' : '' %>">
                    <h2 class="text-xs font-black uppercase tracking-[0.3em] text-emerald-600 mb-4">Core Expertise</h2>
                    <div class="flex flex-wrap gap-2">
                        <% ai.relevantSkills.forEach(function(skill) { %>
                            <span class="bg-white border border-slate-200 px-2 py-1 text-[10px] rounded font-bold uppercase text-slate-700">
                                <%= skill %> </span>
                        <% }); %>
                    </div>
                </section>

                <section class="px-2">
                    <h2 class="text-xs font-black uppercase tracking-[0.3em] text-emerald-600 mb-4">Education</h2>
                    <% (ai.education || []).forEach(function(edu) { %>
                        <div class="mb-4">
                            <div class="text-sm font-bold text-slate-900"><%= edu.degree %></div> <div class="text-[11px] text-slate-500 font-medium">
                                <%= edu.school %> | <%= edu.year %> </div>
                        </div>
                    <% }); %>
                </section>

                <section class="px-2">
                    <h2 class="text-xs font-black uppercase tracking-[0.3em] text-emerald-600 mb-4">Certifications</h2>
                    <% (ai.certifications || []).forEach(function(cert) { %>
                        <div class="mb-4">
                            <div class="text-sm font-bold text-slate-900"><%= cert.title %></div> <div class="text-[11px] text-slate-500 font-medium">
                                <%= cert.issuer %> (<%= cert.date %>) </div>
                        </div>
                    <% }); %>
                </section>
            </div>
        </div>
    </div>
</body>
</html>